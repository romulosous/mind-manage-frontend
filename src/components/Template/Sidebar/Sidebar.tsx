import { AnimatePresence, motion } from "framer-motion";

import styles from "./Sidebar.module.css";
import { usePathname } from "next/navigation";
import NavItem from "./NavItem";

interface SidebarProps {
  isOpen: boolean;
  isDesktop: boolean;
  onClick?: () => void;
}

const Sidebar = ({ isOpen, onClick, isDesktop }: SidebarProps) => {
  const pathname = usePathname();

  const itemVariants = {
    open: {
      opacity: 1,
      transition: { duration: 0.2, delay: 0.2, ease: "easeIn" },
    },
    closed: {
      opacity: 0,
    },
  };

  return (
    <AnimatePresence>
      {isOpen && (
        <motion.aside
          initial={{ width: "0px" }}
          className={styles.container}
          animate={{
            width: "160px",
            position: isDesktop ? "relative" : "fixed",
            transition: { duration: 0.3, ease: "circOut" },
          }}
          exit={{
            width: "0px",
            transition: { duration: 0.15, ease: "easeOut" },
          }}
        >
          <motion.nav
            initial={{ opacity: 0 }}
            className={styles.nav}
            animate="open"
            exit="closed"
            variants={itemVariants}
          >
            <ul>
              <li>
                <NavItem
                  title="Home"
                  onClick={!isDesktop ? onClick : undefined}
                  url="/home"
                  icon={
                    <svg
                      width="40"
                      height="40"
                      viewBox="0 0 40 40"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M40 26H0V26.04C0 27.36 0.52 28.62 1.45 29.55C2.38 30.48 3.64 31 4.96 31H14.75L13.19 38H11.99C11.44 38 10.99 38.45 10.99 39C10.99 39.55 11.44 40 11.99 40H27.99C28.54 40 28.99 39.55 28.99 39C28.99 38.45 28.54 38 27.99 38H26.79L25.23 31H35.02C36.34 31 37.6 30.48 38.53 29.55C39.46 28.62 39.98 27.36 39.98 26.04V26H40ZM8.04 24H13.07C13.56 20.61 16.47 18 20 18C23.53 18 26.44 20.61 26.93 24H31.96C31.96 23.88 31.94 23.77 31.93 23.65L29.76 21.96C29.61 21.85 29.5 21.69 29.44 21.52C29.35 21.27 29.25 21.03 29.14 20.79C29.06 20.62 29.03 20.43 29.06 20.25L29.4 17.52C28.84 16.82 28.2 16.18 27.5 15.62L24.77 15.96C24.59 15.98 24.4 15.96 24.23 15.88C23.99 15.77 23.74 15.67 23.5 15.58C23.33 15.52 23.17 15.4 23.06 15.26L21.37 13.09C20.48 12.99 19.58 12.99 18.68 13.09L16.99 15.26C16.88 15.41 16.72 15.52 16.55 15.58C16.3 15.67 16.06 15.77 15.82 15.88C15.65 15.96 15.46 15.99 15.28 15.96L12.55 15.62C11.85 16.18 11.21 16.82 10.65 17.52L10.99 20.25C11.01 20.43 10.99 20.62 10.91 20.79C10.8 21.03 10.7 21.28 10.61 21.52C10.55 21.69 10.43 21.85 10.29 21.96L8.12 23.65C8.11 23.76 8.1 23.88 8.09 23.99L8.04 24ZM0 24H6.04C6.06 23.66 6.1 23.31 6.15 22.97C6.19 22.72 6.32 22.48 6.53 22.33L8.8 20.56C8.85 20.44 8.89 20.33 8.94 20.22L8.58 17.36C8.55 17.1 8.62 16.85 8.77 16.64C9.58 15.55 10.55 14.58 11.64 13.77C11.85 13.62 12.11 13.55 12.36 13.58L15.22 13.94C15.33 13.89 15.45 13.84 15.56 13.8L17.33 11.53C17.49 11.33 17.72 11.19 17.97 11.15C19.32 10.95 20.68 10.95 22.03 11.15C22.28 11.19 22.52 11.32 22.67 11.53L24.44 13.8C24.56 13.85 24.67 13.89 24.78 13.94L27.64 13.58C27.9 13.55 28.15 13.62 28.36 13.77C29.45 14.58 30.42 15.55 31.23 16.64C31.38 16.85 31.45 17.11 31.42 17.36L31.06 20.22C31.11 20.33 31.16 20.45 31.2 20.56L33.47 22.33C33.67 22.49 33.81 22.72 33.85 22.97C33.9 23.31 33.94 23.65 33.96 24H40V4.96C40 3.64 39.48 2.38 38.55 1.45C37.62 0.52 36.36 0 35.04 0H4.96C3.64 0 2.38 0.52 1.45 1.45C0.52 2.38 0 3.64 0 4.96V24ZM15.1 24H24.9C24.44 21.72 22.42 20 20 20C17.58 20 15.56 21.72 15.1 24ZM35.13 13.51C32.51 10.07 28.75 7.55 24.42 6.52C23.88 6.39 23.34 6.72 23.22 7.26C23.09 7.8 23.42 8.34 23.96 8.47C28.06 9.45 31.59 11.91 33.93 15.26L33.32 15.06C32.8 14.88 32.23 15.17 32.06 15.69C31.88 16.21 32.17 16.78 32.69 16.95L35.69 17.95C35.99 18.05 36.33 18 36.59 17.81C36.85 17.62 37.01 17.32 37.01 17V14C37.01 13.45 36.56 13 36.01 13C35.64 13 35.31 13.21 35.14 13.51H35.13ZM17.39 8.2L17.3 8.29C16.91 8.68 16.91 9.31 17.3 9.71C17.69 10.1 18.32 10.1 18.72 9.71L20.72 7.71C21.11 7.32 21.11 6.69 20.72 6.29L18.72 4.29C18.33 3.9 17.7 3.9 17.3 4.29C16.91 4.68 16.91 5.31 17.3 5.71L17.73 6.14C11.32 6.91 5.88 10.88 3.07 16.4C2.82 16.89 3.02 17.49 3.51 17.75C4 18 4.6 17.8 4.85 17.31C7.28 12.53 11.91 9.05 17.4 8.21L17.39 8.2Z"
                        fill="white"
                      />
                    </svg>
                  }
                  isOpenMenu={isOpen}
                />
              </li>
              <li>
                <NavItem
                  title="Pacientes"
                  onClick={!isDesktop ? onClick : undefined}
                  url="/pacientes"
                  icon={
                    <svg
                      width="72"
                      height="40"
                      viewBox="0 0 72 40"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M36.0112 23.726C40.2188 23.726 44.3587 16.5456 44.3587 9.23531C44.3587 1.60614 39.8137 0 36.0112 0C32.1862 0 27.6637 1.60614 27.6637 9.23531C27.6637 16.5456 31.7925 23.726 36.0112 23.726ZM50.0063 29.1704C48.2513 28.6035 46.1925 27.6823 43.92 26.4305C42.84 25.8164 41.6925 25.1432 40.5337 24.411C39.1838 25.5093 37.6537 26.1588 36.0112 26.1588C34.3687 26.1588 32.8387 25.5093 31.4775 24.411C30.5775 24.9897 29.4075 25.7101 28.08 26.4305C27.4612 26.773 26.865 27.08 26.3025 27.3634C24.7162 28.1547 23.2875 28.757 22.005 29.1704C17.3475 30.6938 16.1663 37.2365 15.885 40H56.1263C55.8337 37.2483 54.675 30.7056 50.0063 29.1704ZM57.2738 22.6277C58.1287 22.6277 58.9613 22.2143 59.7262 21.5058C59.76 21.4821 59.7825 21.4467 59.8162 21.4231C61.74 19.5689 63.2137 15.8606 63.2137 12.0933C63.2137 6.63714 59.9738 5.49158 57.2625 5.49158C54.54 5.49158 51.3 6.63714 51.3 12.0933C51.3 15.8725 52.7963 19.6044 54.7313 21.4467C55.5413 22.1789 56.4075 22.6277 57.2738 22.6277ZM67.68 27.3044C66.375 26.8911 64.8788 26.2179 63.0675 25.2377C62.145 24.7298 61.3237 24.222 60.6825 23.8205C59.6587 24.5999 58.5 25.0723 57.285 25.0723C56.0475 25.0723 54.9 24.6117 53.8763 23.8205C53.0775 24.3283 52.2788 24.8125 51.4912 25.2377C50.7262 25.6628 49.995 26.0289 49.32 26.336C49.8037 26.5368 50.265 26.6903 50.7038 26.832C54.4837 28.072 56.4412 31.5678 57.4538 34.8037H72C71.7412 32.6425 70.8187 28.3437 67.68 27.3044ZM12.2738 21.4939C13.0387 22.2025 13.8825 22.6159 14.7262 22.6159C15.5925 22.6159 16.4475 22.1907 17.235 21.4585C17.2575 21.4349 17.2687 21.4231 17.28 21.4113C19.215 19.5571 20.6887 15.8488 20.6887 12.0815C20.6887 6.62533 17.4487 5.47978 14.7262 5.47978C12.015 5.47978 8.775 6.62533 8.775 12.0815C8.775 15.837 10.2375 19.5453 12.1613 21.3995C12.2063 21.4349 12.24 21.4585 12.2738 21.4939ZM21.3188 26.8438C21.7575 26.7139 22.23 26.5368 22.7025 26.3478C22.0275 26.0289 21.3075 25.6628 20.52 25.2495C19.5975 24.7535 18.7875 24.2456 18.135 23.8323C17.1113 24.6118 15.9638 25.0841 14.7375 25.0841C13.5113 25.0841 12.3637 24.6236 11.34 23.8323C10.7325 24.222 9.91125 24.7298 8.94375 25.2495C7.16625 26.2297 5.6475 26.9029 4.35375 27.3162C1.1925 28.3437 0.27 32.6425 0 34.8155H14.5575C15.57 31.5678 17.5275 28.072 21.3188 26.8438Z"
                        fill="white"
                      />
                    </svg>
                  }
                  isOpenMenu={isOpen}
                />
              </li>
              <li>
                <NavItem
                  title="Calendário"
                  onClick={!isDesktop ? onClick : undefined}
                  url="/calendario"
                  icon={
                    <svg
                      width="36"
                      height="40"
                      viewBox="0 0 36 40"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M28 22H18V32H28V22ZM26 0V4H10V0H6V4H4C1.79 4 0.02 5.79 0.02 8L0 36C0 38.21 1.79 40 4 40H32C34.21 40 36 38.21 36 36V8C36 5.79 34.21 4 32 4H30V0H26ZM32 36H4V14H32V36Z"
                        fill="white"
                      />
                    </svg>
                  }
                  isOpenMenu={isOpen}
                />
              </li>
              <li>
                <NavItem
                  title="Sessões/Eventos"
                  onClick={!isDesktop ? onClick : undefined}
                  url="/sessoes"
                  icon={
                    <svg
                      width="30"
                      height="40"
                      viewBox="0 0 30 40"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M15 0C14.2044 0 13.4413 0.301019 12.8787 0.836838C12.3161 1.37266 12 2.09938 12 2.85714H6V5.71429H1.5C1.10218 5.71429 0.720645 5.8648 0.43934 6.13271C0.158036 6.40061 0 6.76398 0 7.14286V38.5714C0 38.9503 0.158036 39.3137 0.43934 39.5816C0.720645 39.8495 1.10218 40 1.5 40H28.5C28.8978 40 29.2794 39.8495 29.5607 39.5816C29.842 39.3137 30 38.9503 30 38.5714V7.14286C30 6.76398 29.842 6.40061 29.5607 6.13271C29.2794 5.8648 28.8978 5.71429 28.5 5.71429H24V2.85714H18C18 2.09938 17.6839 1.37266 17.1213 0.836838C16.5587 0.301019 15.7956 0 15 0ZM3 8.57143H6V11.4286H24V8.57143H27V37.1429H3V8.57143ZM7.5 14.2857C7.10218 14.2857 6.72064 14.4362 6.43934 14.7041C6.15804 14.972 6 15.3354 6 15.7143C6 16.0932 6.15804 16.4565 6.43934 16.7244C6.72064 16.9923 7.10218 17.1429 7.5 17.1429C7.89782 17.1429 8.27936 16.9923 8.56066 16.7244C8.84196 16.4565 9 16.0932 9 15.7143C9 15.3354 8.84196 14.972 8.56066 14.7041C8.27936 14.4362 7.89782 14.2857 7.5 14.2857ZM12 14.2857V17.1429H24V14.2857H12ZM7.5 20C7.10218 20 6.72064 20.1505 6.43934 20.4184C6.15804 20.6863 6 21.0497 6 21.4286C6 21.8075 6.15804 22.1708 6.43934 22.4387C6.72064 22.7066 7.10218 22.8571 7.5 22.8571C7.89782 22.8571 8.27936 22.7066 8.56066 22.4387C8.84196 22.1708 9 21.8075 9 21.4286C9 21.0497 8.84196 20.6863 8.56066 20.4184C8.27936 20.1505 7.89782 20 7.5 20ZM12 20V22.8571H24V20H12ZM7.5 25.7143C7.10218 25.7143 6.72064 25.8648 6.43934 26.1327C6.15804 26.4006 6 26.764 6 27.1429C6 27.5217 6.15804 27.8851 6.43934 28.153C6.72064 28.4209 7.10218 28.5714 7.5 28.5714C7.89782 28.5714 8.27936 28.4209 8.56066 28.153C8.84196 27.8851 9 27.5217 9 27.1429C9 26.764 8.84196 26.4006 8.56066 26.1327C8.27936 25.8648 7.89782 25.7143 7.5 25.7143ZM12 25.7143V28.5714H24V25.7143H12ZM7.5 31.4286C7.10218 31.4286 6.72064 31.5791 6.43934 31.847C6.15804 32.1149 6 32.4783 6 32.8571C6 33.236 6.15804 33.5994 6.43934 33.8673C6.72064 34.1352 7.10218 34.2857 7.5 34.2857C7.89782 34.2857 8.27936 34.1352 8.56066 33.8673C8.84196 33.5994 9 33.236 9 32.8571C9 32.4783 8.84196 32.1149 8.56066 31.847C8.27936 31.5791 7.89782 31.4286 7.5 31.4286ZM12 31.4286V34.2857H24V31.4286H12Z"
                        fill="white"
                      />
                    </svg>
                  }
                  isOpenMenu={isOpen}
                />
              </li>
            </ul>
          </motion.nav>
        </motion.aside>
      )}
    </AnimatePresence>
  );
};

export default Sidebar;
